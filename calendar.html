<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Systemüíñ</title>

<style>
:root {
    --bg: linear-gradient(135deg, #807d16, #aca822);
    --card: #a8a31a;
    --text: #333;
}

.dark {
    --bg: #1e1e1e;
    --card: #2c2c2c;
    --text: white;
}

body {
    margin: 0;
    font-family: 'Comic Sans MS', 'Comic Sans';
    background: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.container {
    background: var(--card);
    padding: 25px;
    border-radius: 20px;
    width: 360px;
    text-align: center;
}

input, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

button {
    font-family: 'Comic Sans MS', 'Comic Sans';
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    border: none;
    border-radius: 8px;
    background: #807d16;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

button:hover {
    background: #e63956;
}

.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: var(--card);
    width: 420px;
    max-height: 85vh;
    overflow-y: auto;
    padding: 20px;
    border-radius: 15px;
}

.event {
    background: #fff0f3;
    padding: 10px;
    margin-top: 10px;
    border-radius: 10px;
    font-size: 13px;
}

.dark .event {
    background: #3a3a3a;
}

.event img {
    width: 100%;
    border-radius: 10px;
    margin-top: 5px;
}

.small-btn {
    font-family: 'Comic Sans MS', 'Comic Sans';
    width: auto;
    padding: 5px 8px;
    font-size: 11px;
    margin-top: 5px;
    margin-right: 5px;
}
</style>
</head>

<body>

<div class="container">
    <h2> Forever  System</h2>

    <input type="text" id="eventName" placeholder="Event Name">
    <input type="date" id="eventDate">
    <textarea id="eventNote" placeholder="Notes nimo"></textarea>
    <input type="file" id="eventPhoto" accept="image/*" placeholder="k">

    <button onclick="addEvent()">Save </button>
    <button onclick="openModal()">View Memories </button>
    <button onclick="toggleDark()"> Dark Mode</button>
</div>

<div class="modal" id="modal">
    <div class="modal-content">
        <h3>Memory Dashbord</h3>
        <div id="analytics"></div>
        <div id="eventsList"></div>
        <button onclick="closeModal()">Exit ‚ùå</button>
    </div>
</div>

<script>
if (localStorage.getItem("darkMode") === "on") {
    document.body.classList.add("dark");
}

function toggleDark() {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode",
        document.body.classList.contains("dark") ? "on" : "off"
    );
}

function getEvents() {
    return JSON.parse(localStorage.getItem("loveEvents")) || [];
}

function saveEvents(events) {
    localStorage.setItem("loveEvents", JSON.stringify(events));
}

function addEvent() {
    const name = eventName.value;
    const date = eventDate.value;
    const note = eventNote.value;
    const photoInput = eventPhoto;

    if (!name || !date) {
        alert("Name and Date required!");
        return;
    }

    const reader = new FileReader();

    reader.onload = function() {
        const photoData = photoInput.files[0] ? reader.result : null;
        const events = getEvents();
        events.push({ name, date, note, photo: photoData });
        saveEvents(events);

        eventName.value = "";
        eventDate.value = "";
        eventNote.value = "";
        eventPhoto.value = "";

        alert("Saved üíñ");
    };

    if (photoInput.files[0]) {
        reader.readAsDataURL(photoInput.files[0]);
    } else {
        reader.onload();
    }
}

function calculateStats(date) {
    const now = new Date();
    const eventDate = new Date(date);

    const diffTime = now - eventDate;
    const totalDays = Math.floor(diffTime / (1000*60*60*24));
    const totalWeeks = Math.floor(totalDays / 7);

    let years = now.getFullYear() - eventDate.getFullYear();
    let months = now.getMonth() - eventDate.getMonth();
    let days = now.getDate() - eventDate.getDate();

    if (days < 0) {
        months--;
        const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0);
        days += prevMonth.getDate();
    }

    if (months < 0) {
        years--;
        months += 12;
    }

    const totalMonths = years * 12 + months;

    let nextYear = new Date(eventDate);
    nextYear.setFullYear(now.getFullYear());
    if (nextYear < now) nextYear.setFullYear(now.getFullYear() + 1);
    const daysUntilYear = Math.ceil((nextYear - now)/(1000*60*60*24));

    let nextMonth = new Date(eventDate);
    while (nextMonth < now) {
        nextMonth.setMonth(nextMonth.getMonth() + 1);
    }
    const daysUntilMonth = Math.ceil((nextMonth - now)/(1000*60*60*24));

    return {
        totalDays,
        totalWeeks,
        totalMonths,
        years,
        months,
        days,
        daysUntilYear,
        daysUntilMonth
    };
}

function deleteEvent(index) {
    const events = getEvents();
    events.splice(index, 1);
    saveEvents(events);
    displayEvents();
}

function editEvent(index) {
    const events = getEvents();
    const newName = prompt("Edit Name:", events[index].name);
    const newDate = prompt("Edit Date (YYYY-MM-DD):", events[index].date);
    const newNote = prompt("Edit Note:", events[index].note);

    if (newName && newDate) {
        events[index].name = newName;
        events[index].date = newDate;
        events[index].note = newNote;
        saveEvents(events);
        displayEvents();
    }
}

function displayEvents() {
    const events = getEvents();
    const container = document.getElementById("eventsList");
    const analytics = document.getElementById("analytics");

    container.innerHTML = "";
    analytics.innerHTML = `<strong>Total Memories:</strong> ${events.length}<br>`;

    events.forEach((event, index) => {
        const stats = calculateStats(event.date);

        container.innerHTML += `
            <div class="event">
                <strong>${event.name}</strong><br>
                üíò ${stats.totalDays} Days<br>
                üìÜ ${stats.totalWeeks} Weeks<br>
                üóìÔ∏è ${stats.totalMonths} Total Months<br>
                ‚ù§Ô∏è ${stats.years} Years, ${stats.months} Months, ${stats.days} Days<br>
                üéâ Next Anniversary in ${stats.daysUntilYear} days<br>
                üíñ Next Monthsary in ${stats.daysUntilMonth} days<br>
                ${event.note ? `<p>üíå ${event.note}</p>` : ""}
                ${event.photo ? `<img src="${event.photo}">` : ""}
                <button class="small-btn" onclick="editEvent(${index})">Edit ‚úèÔ∏è</button>
                <button class="small-btn" onclick="deleteEvent(${index})">Delete ‚ùå</button>
            </div>
        `;
    });
}

function openModal() {
    document.getElementById("modal").style.display = "flex";
    displayEvents();
}

function closeModal() {
    document.getElementById("modal").style.display = "none";
}
</script>

</body>
</html>
